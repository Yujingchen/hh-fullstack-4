(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(13),c=t.n(u),o=(t(19),t(2)),l=function(e){var n=e.persons,t=e.query,a=e.handleSearchTextChange,u=""!==t?n.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())})):null,c=u?u.map((function(e){return r.a.createElement("p",{key:e.name},e.name," ",e.number)})):null;return r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{value:t,onChange:a}),c)},i=function(e){var n=e.hanldeSubmit,t=e.newName,a=e.newNumber,u=e.handleNameTextChange,c=e.handleNumberTextChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"add a new"),r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:u})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:a,onChange:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},m=function(e){var n=e.persons,t=e.handleDeleteContact,a=n.map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement("span",null,e.name," ",e.number),r.a.createElement("span",null,r.a.createElement("button",{onClick:function(){return function(e){window.confirm("Delete ".concat(e.name))&&t(e.id)}(e)}},"delete")))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Numbers"),a)},f=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{style:{color:"red",backgroundColor:"grey",fontSize:"20px"},className:"error"},n)},h=t(3),s=t.n(h),d="/api/persons",b=function(){return s.a.get(d).then((function(e){return e.data}))},p=function(e){return s.a.post(d,e).then((function(e){return e.data}))},g=function(e){return s.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},E=function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},v=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),h=Object(o.a)(c,2),s=h[0],d=h[1],v=Object(a.useState)(""),w=Object(o.a)(v,2),C=w[0],S=w[1],O=Object(a.useState)(""),j=Object(o.a)(O,2),k=j[0],N=j[1],x=Object(a.useState)(""),y=Object(o.a)(x,2),T=y[0],D=y[1];Object(a.useEffect)((function(){b().then((function(e){u(e)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(f,{message:T}),r.a.createElement(l,{persons:t,query:k,handleSearchTextChange:function(e){N(e.target.value)}}),r.a.createElement(i,{hanldeSubmit:function(e){if(e.preventDefault(),t.filter((function(e){return e.name===s})).length>0){if(window.confirm("".concat(s," is already add to phonebook, replace the old number with a new one?"))){var n={name:s,number:C},a=t.find((function(e){return e.name===s})).id,r=t.filter((function(e){return e.id!==a}));E(a,n).then((function(e){u(r.concat(e))})).catch((function(e){D("Something wrong happen when updating number for ".concat(s)),setTimeout((function(){D(null)}),5e3)}))}}else p({name:s,number:C}).then((function(e){u(t.concat(e))})).catch((function(e){console.log("hello"),console.log(e.response.data),D(e.response.data.error),setTimeout((function(){D(null)}),5e3)}))},handleNameTextChange:function(e){d(e.target.value)},handleNumberTextChange:function(e){S(e.target.value)},newName:s,newNumber:C}),r.a.createElement(m,{persons:t,handleDeleteContact:function(e){return function(e){g(e).then((function(){u(t.filter((function(n){return n.id!==e})))})).catch((function(e){D("Something wrong happen when deleting a contact"),setTimeout((function(){D(null)}),5e3)}))}(e)}}))};c.a.render(r.a.createElement(v,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.68818778.chunk.js.map